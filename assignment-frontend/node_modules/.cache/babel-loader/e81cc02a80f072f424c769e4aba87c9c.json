{"ast":null,"code":"import jwtDecode from 'jwt-decode';\n\nclass AuthenticationService {\n  constructor() {\n    let getUserDetails = this.validateTokenId();\n    this.userData = getUserDetails.user;\n  }\n\n  validateTokenId() {\n    let token = sessionStorage.getItem('token');\n\n    if (token !== null) {\n      const jwtDecoded = jwtDecode(token);\n      const milis2renewal = Math.round(jwtDecoded.exp * 1000 - new Date().getTime() - 30000);\n\n      if (milis2renewal < 0) {\n        sessionStorage.removeItem('token');\n        return false;\n      }\n\n      return jwtDecoded;\n    }\n\n    return false;\n  }\n\n  logout() {\n    sessionStorage.removeItem('token');\n  }\n\n}\n\nexport default new AuthenticationService();","map":{"version":3,"sources":["D:/personalWork/assignment-frontend/src/services/Authentication.Service.js"],"names":["jwtDecode","AuthenticationService","constructor","getUserDetails","validateTokenId","userData","user","token","sessionStorage","getItem","jwtDecoded","milis2renewal","Math","round","exp","Date","getTime","removeItem","logout"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,YAAtB;;AACA,MAAMC,qBAAN,CAA4B;AACxBC,EAAAA,WAAW,GAAG;AACV,QAAIC,cAAc,GAAG,KAAKC,eAAL,EAArB;AACA,SAAKC,QAAL,GAAgBF,cAAc,CAACG,IAA/B;AACH;;AAEDF,EAAAA,eAAe,GAAG;AACd,QAAIG,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAZ;;AACA,QAAIF,KAAK,KAAK,IAAd,EAAoB;AAChB,YAAMG,UAAU,GAAGV,SAAS,CAACO,KAAD,CAA5B;AACA,YAAMI,aAAa,GAAGC,IAAI,CAACC,KAAL,CAAWH,UAAU,CAACI,GAAX,GAAiB,IAAjB,GAAyB,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAAxB,GAAiD,KAA5D,CAAtB;;AACA,UAAIL,aAAa,GAAG,CAApB,EAAuB;AACnBH,QAAAA,cAAc,CAACS,UAAf,CAA0B,OAA1B;AACA,eAAO,KAAP;AACH;;AACD,aAAOP,UAAP;AACH;;AACD,WAAO,KAAP;AACH;;AAEDQ,EAAAA,MAAM,GAAG;AACLV,IAAAA,cAAc,CAACS,UAAf,CAA0B,OAA1B;AACH;;AAtBuB;;AA0B5B,eAAe,IAAIhB,qBAAJ,EAAf","sourcesContent":["import jwtDecode from 'jwt-decode';\r\nclass AuthenticationService {\r\n    constructor() {\r\n        let getUserDetails = this.validateTokenId()\r\n        this.userData = getUserDetails.user\r\n    }\r\n\r\n    validateTokenId() {\r\n        let token = sessionStorage.getItem('token');\r\n        if (token !== null) {\r\n            const jwtDecoded = jwtDecode(token);\r\n            const milis2renewal = Math.round(jwtDecoded.exp * 1000 - (new Date()).getTime() - 30000);\r\n            if (milis2renewal < 0) {\r\n                sessionStorage.removeItem('token')\r\n                return false;\r\n            }\r\n            return jwtDecoded;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    logout() {\r\n        sessionStorage.removeItem('token')\r\n    }\r\n\r\n}\r\n\r\nexport default new AuthenticationService();\r\n\r\n"]},"metadata":{},"sourceType":"module"}