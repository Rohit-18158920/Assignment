{"ast":null,"code":"import _regeneratorRuntime from\"D:/personalWork/assignment-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/personalWork/assignment-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"D:/personalWork/assignment-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"D:/personalWork/assignment-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/personalWork/assignment-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:/personalWork/assignment-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:/personalWork/assignment-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/personalWork/assignment-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./style.css';import Config from'../config';import LineLoader from'../components/LineLoader';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function validate(username,password){return{username:username.length===0,password:password.length===0};}var LoginComponent=/*#__PURE__*/function(_React$Component){_inherits(LoginComponent,_React$Component);var _super=_createSuper(LoginComponent);function LoginComponent(){var _this;_classCallCheck(this,LoginComponent);_this=_super.call(this);_this.handleChange=function(event){_this.setState(_defineProperty({},event.target.id,event.target.value));if(event.target.id==='email'){_this.setState({isDisabledusername:false});}if(event.target.id==='password'){_this.setState({isDisabledpassword:false});}};_this.handleSubmit=function(event){event.preventDefault();if(!_this.canBeSubmitted()){event.preventDefault();return;}_this.setState({errorMsg:''});_this.validateData();};_this.state={cardHidden:true,email:\"\",password:\"\"};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.submituserRegistrationForm=_this.submituserRegistrationForm.bind(_assertThisInitialized(_this));document.body.style.backgroundColor=\"#0747a6\";return _this;}_createClass(LoginComponent,[{key:\"componentDidMount\",value:function componentDidMount(){setTimeout(function(){this.setState({cardHidden:false,email:\"\",password:\"\",isDisabledusername:false,isDisabledpassword:false,userName:false,errorMsg:\"\",loaded:true});}.bind(this),700);}},{key:\"submituserRegistrationForm\",value:function submituserRegistrationForm(e){e.preventDefault();this.validateData();}},{key:\"canBeSubmitted\",value:function canBeSubmitted(){var errors=validate(this.state.email,this.state.password);var isDisabled=Object.keys(errors).some(function(x){return errors[x];});this.setState({isDisabledusername:errors.username});this.setState({isDisabledpassword:errors.password});return!isDisabled;}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[!this.state.loaded?/*#__PURE__*/_jsx(LineLoader,{}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Cognito User Tool\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group has-error\",children:/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"text\",className:\"form-control\",name:\"username\",value:this.state.email,onChange:this.handleChange,placeholder:\"Username\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",className:\"form-control\",name:\"password\",value:this.state.password,onChange:this.handleChange,placeholder:\"Password\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!this.state.loaded,className:\"btn btn-primary btn-lg btn-block \",children:\"Sign in\"})}),this.state.errorMsg!==''?/*#__PURE__*/_jsx(\"div\",{align:\"center\",style:{color:\"red\"},children:this.state.errorMsg}):/*#__PURE__*/_jsx(_Fragment,{})]})]});}},{key:\"validateData\",value:function validateData(){var _this2=this;var api={headers:{'Accept':'application/json','Content-Type':'application/json'},method:'POST',url:Config.loginUrl,body:{\"username\":this.state.email,\"password\":this.state.password}};// window.location.href = '/home';\nthis.setState({loaded:false});this.request(api).then(function(res){if(res.status===200||res.status===304){console.log(\"reached here\");return res.json().then(function(res){var redirectToHomePage='/home';_this2.setState({loaded:true});sessionStorage.setItem('homePage',redirectToHomePage);sessionStorage.setItem('token',res.token);sessionStorage.setItem('userId',res.username);console.log('res::'+JSON.stringify(res));window.location.href=redirectToHomePage;});}else if(res.status===401){return res.json().then(function(res){console.log('reached here'+JSON.stringify(res));_this2.setState({loaded:true,errorMsg:res.error});});}else{_this2.setState({loaded:true,errorMsg:'Something went wrong'});}});}},{key:\"request\",value:function(){var _request=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(api,query){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(api.url,{method:api.method,headers:api.headers,body:this.validateBody(api)});case 2:result=_context.sent;return _context.abrupt(\"return\",result);case 4:case\"end\":return _context.stop();}}},_callee,this);}));function request(_x,_x2){return _request.apply(this,arguments);}return request;}()},{key:\"validateBody\",value:function validateBody(api){if(api.method==='GET'||api.method==='PUT'){return JSON.stringify();}return JSON.stringify(api.body);}}]);return LoginComponent;}(React.Component);export default LoginComponent;","map":{"version":3,"sources":["D:/personalWork/assignment-frontend/src/Login/login.js"],"names":["React","Config","LineLoader","validate","username","password","length","LoginComponent","handleChange","event","setState","target","id","value","isDisabledusername","isDisabledpassword","handleSubmit","preventDefault","canBeSubmitted","errorMsg","validateData","state","cardHidden","email","bind","submituserRegistrationForm","document","body","style","backgroundColor","setTimeout","userName","loaded","e","errors","isDisabled","Object","keys","some","x","color","api","headers","method","url","loginUrl","request","then","res","status","console","log","json","redirectToHomePage","sessionStorage","setItem","token","JSON","stringify","window","location","href","error","query","fetch","validateBody","result","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './style.css';\r\nimport Config from '../config';\r\nimport LineLoader from '../components/LineLoader';\r\n\r\nfunction validate(username, password) {\r\n  return {\r\n    username: username.length === 0,\r\n    password: password.length === 0,\r\n  };\r\n}\r\n\r\nclass LoginComponent extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      cardHidden: true,\r\n      email: \"\",\r\n      password: \"\"\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.submituserRegistrationForm = this.submituserRegistrationForm.bind(this);\r\n    document.body.style.backgroundColor = \"#0747a6\";\r\n  }\r\n  componentDidMount() {\r\n    setTimeout(\r\n      function () {\r\n        this.setState({\r\n          cardHidden: false,\r\n          email: \"\",\r\n          password: \"\",\r\n          isDisabledusername: false,\r\n          isDisabledpassword: false,\r\n          userName: false,\r\n          errorMsg: \"\",\r\n          loaded: true\r\n        });\r\n      }.bind(this),\r\n      700\r\n    );\r\n  }\r\n  handleChange = event => {\r\n    this.setState({\r\n      [event.target.id]: event.target.value\r\n    });\r\n    if (event.target.id === 'email') {\r\n      this.setState({ isDisabledusername: false });\r\n    }\r\n    if (event.target.id === 'password') {\r\n      this.setState({ isDisabledpassword: false });\r\n    }\r\n  }\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    if (!this.canBeSubmitted()) {\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n    this.setState({\r\n      errorMsg: ''\r\n    })\r\n\r\n    this.validateData();\r\n\r\n  }\r\n  submituserRegistrationForm(e) {\r\n    e.preventDefault();\r\n    this.validateData();\r\n\r\n  }\r\n  canBeSubmitted() {\r\n    const errors = validate(this.state.email, this.state.password);\r\n    const isDisabled = Object.keys(errors).some(x => errors[x]);\r\n    this.setState({ isDisabledusername: errors.username });\r\n    this.setState({ isDisabledpassword: errors.password });\r\n    return !isDisabled;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"login-form\">\r\n        {!this.state.loaded ? (\r\n          <LineLoader />\r\n        ) : <></>}\r\n        <form onSubmit={this.handleSubmit}>\r\n          {/* <>\r\n            <img src=\"/apple-icon-57x57.png\" alt=\"kbz icon\" />\r\n          </> */}\r\n          <h2 className=\"text-center\">Cognito User Tool</h2>\r\n          <div className=\"form-group has-error\">\r\n            <input id=\"email\" type=\"text\" className=\"form-control\" name=\"username\" value={this.state.email} onChange={this.handleChange} placeholder=\"Username\" required />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input id=\"password\" type=\"password\" className=\"form-control\" name=\"password\" value={this.state.password} onChange={this.handleChange} placeholder=\"Password\" required />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <button type=\"submit\" disabled={!this.state.loaded} className=\"btn btn-primary btn-lg btn-block \">Sign in</button>\r\n          </div>\r\n          {\r\n            this.state.errorMsg !== '' ?\r\n              <div align=\"center\" style={{ color: \"red\" }}>\r\n                {this.state.errorMsg}\r\n              </div> : <></>\r\n          }\r\n        </form>\r\n\r\n      </div>\r\n    );\r\n  }\r\n\r\n  validateData() {\r\n    let api = {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      method: 'POST',\r\n      url: Config.loginUrl,\r\n      body: {\r\n        \"username\": this.state.email,\r\n        \"password\": this.state.password\r\n      }\r\n    }\r\n    // window.location.href = '/home';\r\n    this.setState({\r\n      loaded: false\r\n    })\r\n    this.request(api).then((res) => {\r\n      if (res.status === 200 || res.status === 304) {\r\n        console.log(\"reached here\")\r\n        return res.json().then((res) => {\r\n          let redirectToHomePage = '/home';\r\n          this.setState({\r\n            loaded: true\r\n          })\r\n          sessionStorage.setItem('homePage', redirectToHomePage);\r\n          sessionStorage.setItem('token', res.token);\r\n          sessionStorage.setItem('userId', res.username);\r\n          console.log('res::' + JSON.stringify(res));\r\n          window.location.href = redirectToHomePage;\r\n\r\n        })\r\n      } else if (res.status === 401) {\r\n\r\n        return res.json().then((res) => {\r\n          console.log('reached here' + JSON.stringify(res));\r\n          this.setState({\r\n            loaded: true,\r\n            errorMsg: res.error\r\n          })\r\n        })\r\n      } else {\r\n        this.setState({\r\n          loaded: true,\r\n          errorMsg: 'Something went wrong'\r\n        })\r\n      }\r\n    });\r\n  }\r\n  async request(api, query) {\r\n    let result = await fetch(api.url, {\r\n      method: api.method,\r\n      headers: api.headers,\r\n      body: this.validateBody(api)\r\n    });\r\n    return result\r\n  }\r\n  validateBody(api) {\r\n    if (api.method === 'GET' || api.method === 'PUT') {\r\n      return JSON.stringify()\r\n    }\r\n    return JSON.stringify(api.body);\r\n  }\r\n}\r\n\r\nexport default LoginComponent;  "]},"metadata":{},"sourceType":"module"}